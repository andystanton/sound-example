#!/usr/bin/env bash

if grep -qe '^MSYS_' <<<"$(uname -s)"; then
    generator_override='-G "MSYS Makefiles"'
fi

function create_makefile() {
    root_makefile='.PHONY : all clean build run

build_path = build
bin_path = $(build_path)/bin
bin_name = sound-example

all: | build

clean:
	@rm -rf $(build_path)

build:
	@mkdir -p $(build_path)
	@cd $(build_path) && cmake'" ${generator_override}"' .. && make -j4;

run: build
	@cd $(bin_path) && ./$(bin_name);
'

    echo "${root_makefile}" >Makefile
}

create_makefile
